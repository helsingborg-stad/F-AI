import{p as l,e as u,b,a as c,r as se,f as F,g as ie,t as ae,m as ce,u as le}from"./props-Cw8jdACA.js";import{n as ue,E as fe,o as de,q as ye,r as me,g as T,v as q,h as D,k as N,i as _,j as k,p as j,u as O,f,d as I,m as ge}from"./runtime-BvpDFoqK.js";import{O as pe}from"./index-D-8MO0q_.js";import{y as xe,g as Y}from"./index-BHYIh-Xd.js";function _e(t,e,...r){var n=t,o=ye,s;ue(()=>{o!==(o=e())&&(s&&(me(s),s=null),s=de(()=>o(n,...r)))},fe)}const Ce=t=>t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),Ee=t=>pe(t.replace(/([A-Z])/g," $1").trim()),P=t=>Ce(Ee(t)),h="storybook-stories-extractor-context";function K(t){let e=l(t.isExtracting),r=l(t.register);return{get isExtracting(){return e},get register(){return r}}}function ve(t){const{stories:e}=t,r=K({isExtracting:!0,register:n=>{e.set(n.exportName??P(n.name),n)}});T(h,r)}function Se(){return q(h)||T(h,K({isExtracting:!1,register:()=>{}})),D(h)}const R="storybook-story-renderer-context";function be(t){let e=N(l(t.currentStoryExportName)),r=N(l(t.args)),n=N(l(t.storyContext));function o(s){k(e,l(s.currentStoryExportName)),k(r,l(s.args)),k(n,l(s.storyContext))}return{get args(){return _(r)},get storyContext(){return _(n)},get currentStoryExportName(){return _(e)},set:o}}function Ne(){const t=be({currentStoryExportName:void 0,args:{},storyContext:{}});T(R,t)}function X(){return q(R)||Ne(),D(R)}const A="storybook-stories-template-snippet-context";function ke(){let t=N(void 0);function e(r){k(t,l(r))}return{get template(){return _(t)},set:e}}function he(){return q(A)||T(A,ke()),D(A).template}var Te=ae('<p>No story rendered. See <a href="https://github.com/storybookjs/addon-svelte-csf#defining-stories" target="_blank">the docs</a> on how to define stories.</p>');function U(t,e){j(e,!0);const r=se(e,["$$slots","$$events","$$legacy","children","name","exportName","play"]),n=e.exportName??P(e.name),o=Se(),s=X(),a=he(),i=ge(()=>!o.isExtracting&&s.currentStoryExportName===n);o.isExtracting&&o.register({children:e.children,name:e.name,exportName:n,play:e.play,...r});function d(m,C){C&&m.playFunction&&(m.playFunction.__play=C)}O(()=>{_(i)&&d(s.storyContext,e.play)});var y=u(),v=f(y);{var Z=m=>{var C=u(),z=f(C);{var G=g=>{var E=u(),w=f(E);_e(w,()=>e.children,()=>s.args,()=>s.storyContext),c(g,E)},H=g=>{var E=u(),w=f(E);{var Q=p=>{a(p,()=>s.args,()=>s.storyContext)},V=p=>{var M=u(),$=f(M);{var ee=x=>{var S=u(),re=f(S);F(re,()=>s.storyContext.component,(ne,oe)=>{oe(ne,ie(()=>s.args))}),c(x,S)},te=x=>{var S=Te();c(x,S)};b($,x=>{s.storyContext.component?x(ee):x(te,!1)},!0)}c(p,M)};b(w,p=>{a?p(Q):p(V,!1)},!0)}c(g,E)};b(z,g=>{e.children?g(G):g(H,!1)})}c(m,C)};b(v,m=>{_(i)&&m(Z)})}c(t,y),I()}U.__docgen={data:[],name:"Story.svelte"};function Be(t){return{Story:U}}function W(t,e){j(e,!0),ve(e.repository());var r=u(),n=f(r);F(n,()=>e.Stories,(o,s)=>{s(o,{})}),c(t,r),I()}W.__docgen={data:[{name:"Stories",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"function",text:"Component<{}, {}, string>"},static:!1,readonly:!1},{name:"repository",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"function",text:"() => StoriesRepository<Cmp>"},static:!1,readonly:!1}],name:"StoriesExtractor.svelte"};function we(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}function Ae(t){return Object.is(t,-0)?"-0":t.toString()}function Oe(t){const e=[],r=t.length;if(r===0)return e;let n=0,o="",s="",a=!1;for(t.charCodeAt(0)===46&&(e.push(""),n++);n<r;){const i=t[n];s?i==="\\"&&n+1<r?(n++,o+=t[n]):i===s?s="":o+=i:a?i==='"'||i==="'"?s=i:i==="]"?(a=!1,e.push(o),o=""):o+=i:i==="["?(a=!0,o&&(e.push(o),o="")):i==="."?o&&(e.push(o),o=""):o+=i,n++}return o&&e.push(o),e}function B(t,e,r){if(t==null)return r;switch(typeof e){case"string":{const n=t[e];return n===void 0?we(e)?B(t,Oe(e),r):r:n}case"number":case"symbol":{typeof e=="number"&&(e=Ae(e));const n=t[e];return n===void 0?r:n}default:{if(Array.isArray(e))return Re(t,e,r);Object.is(e==null?void 0:e.valueOf(),-0)?e="-0":e=String(e);const n=t[e];return n===void 0?r:n}}}function Re(t,e,r){if(e.length===0)return r;let n=t;for(let o=0;o<e.length;o++){if(n==null)return r;n=n[e[o]]}return n===void 0?r:n}const{addons:Fe}=__STORYBOOK_MODULE_PREVIEW_API__,qe=Fe.getChannel(),De=t=>{const{storyContext:e}=t;if(je(e))return;const r=Ie({code:e.parameters.__svelteCsf.rawCode,args:t.args});setTimeout(()=>{qe.emit(xe,{id:e.id,args:e.unmappedArgs,source:r})})},je=t=>{var o;const e=(o=t==null?void 0:t.parameters.docs)==null?void 0:o.source,r=t==null?void 0:t.parameters.__isArgsStory;return(t==null?void 0:t.parameters.__svelteCsf.rawCode)?(e==null?void 0:e.type)===Y.DYNAMIC?!1:!r||(e==null?void 0:e.code)||(e==null?void 0:e.type)===Y.CODE:!0},Ie=({code:t,args:e})=>{const r=Object.entries(e??{}).map(([s,a])=>Ye(s,a)).filter(s=>s);let n=r.join(" ");return n.length>50&&(n=`
  ${r.join(`
  `)}
`),t.replaceAll("{...args}",n).replace(/args(?:[\w\d_$\.\?\[\]"'])+/g,s=>{const a=s.replaceAll("?",""),i=B({args:e},a);return J(i)})},Me=t=>{var r;const e=((r=t.getMockName)==null?void 0:r.call(t))??t.name;return e&&e!=="spy"?e:"() => {}"},J=t=>{var e;return typeof t=="object"&&t[Symbol.for("svelte.snippet")]?"snippet":typeof t=="function"?Me(t):(e=JSON.stringify(t,null,1))==null?void 0:e.replace(/\n/g,"").replace(new RegExp("(?<!\\s)([}\\]])$")," $1")},Ye=(t,e)=>{if(e==null)return null;if(e===!0)return t;const r=J(e);return typeof e=="string"?`${t}=${r}`:`${t}={${r}}`};function L(t,e){j(e,!0);const r=X();O(()=>{r.set({currentStoryExportName:e.exportName,args:e.args,storyContext:e.storyContext})}),O(()=>{De({args:e.args,storyContext:e.storyContext})});var n=u(),o=f(n);F(o,()=>e.Stories,(s,a)=>{a(s,{})}),c(t,n),I()}L.__docgen={data:[{name:"Stories",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"function",text:"Component<{}, {}, string>"},static:!1,readonly:!1},{name:"exportName",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"args",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1},{name:"storyContext",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1}],name:"StoryRenderer.svelte"};const Pe=document.createDocumentFragment?()=>document.createDocumentFragment():()=>document.createElement("div"),Je=(t,e)=>{const r={stories:new Map};try{const o=ce(W,{target:Pe(),props:{Stories:t,repository:()=>r}});le(o)}catch(o){console.error(`Error in mounting stories ${o.toString()}`,o)}const n={};for(const[o,s]of r.stories){const a={...s,render:(d,y)=>({Component:L,props:{exportName:o,Stories:t,storyContext:y,args:d}})},i=e.play??s.play;i&&(a.play=d=>{var v;const y=(v=d.playFunction)==null?void 0:v.__play;return y?y(d):i(d)}),n[o]=a}return n};export{Je as c,Be as d};
